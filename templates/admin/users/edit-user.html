<div id="admin-edit-user" class="row padding-20">
    <div class="row width-50">
        <div class="row">
            <img ng-src="{{users.users.getCurrent().photo.value}}" alt="" class="left" ng-show="users.users.getCurrent().photo.value !==''">
            <img src="../resources/images/no_photo.png" alt="" class="" ng-show="users.users.getCurrent().photo.value === ''">
            <label for="userfile" class="button blue">
                <span class="fa fa-upload"></span>&nbsp; Загрузить фото
                <input
                        type="file"
                        name="userfile"
                        id="userfile"
                        uploader
                        uploader-url="/serverside/libs/krypton/api.php"
                        uploader-data="uploaderData"
                        uploader-on-complete-upload="onCompleteUploadPhoto"/>
            </label>
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-surname">Фамилия пользователя</label>
            <input type="text"
                   id="current-user-surname"
                   name="current-user-surname"
                   class="width-100"
                   ng-model="users.users.getCurrent().surname.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-name">Имя пользователя</label>
            <input type="text"
                   id="current-user-name"
                   name="current-user-name"
                   class="width-100"
                   ng-model="users.users.getCurrent().name.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-fname">Имя пользователя</label>
            <input type="text"
                   id="current-user-fname"
                   name="current-user-fname"
                   class="width-100"
                   ng-model="users.users.getCurrent().fname.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-position">Должность пользователя</label>
            <input type="text"
                   id="current-user-position"
                   name="current-user-position"
                   class="width-100"
                   ng-model="users.users.getCurrent().position.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-email">E-mail пользователя</label>
            <input type="text"
                   id="current-user-email"
                   name="current-user-email"
                   class="width-100"
                   ng-model="users.users.getCurrent().email.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <div class="row">
            <label for="current-user-phone">
                Телефоны пользователя
                <a href="" class="right" ng-click="addPhone()">Добавить</a>
            </label>
            <input type="text"
                   id="current-user-phone"
                   name="current-user-phone"
                   class="width-100 margin-bottom-10"
                   ng-model="phone"
                   ng-change="users.users.getCurrent()._states_.changed(true)"
                   ng-repeat="phone in users.users.getCurrent().phones track by $index">

        </div>

        <div class="row">
            <label for="current-user-phone">Мобильный телефон пользователя</label>
            <input type="text"
                   id="current-user-mobile"
                   name="current-user-mobile"
                   class="width-100 margin-bottom-10"
                   ng-model="users.users.getCurrent().mobile.value"
                   ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>

        <!--
        <div class="row margin-bottom-10">
            <label for="current-user-is-admin">Администратор</label>
            <input type="checkbox" id="current-user-is-admin" name="current-user-is-admin" ng-model="users.users.getCurrent().isAdmin.value" ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>
        -->

        <!--
        <div class="row margin-bottom-10">
            <label for="current-user-is-ldap-enabled">Администратор</label>
            <input type="checkbox" id="current-user-is-ldap-enabled" name="current-user-is-admin" ng-model="users.users.getCurrent().isAdmin.value" ng-change="users.users.getCurrent()._states_.changed(true)">
        </div>
        -->

        <div class="row margin-bottom-10">
            <label for="current-user-group">Группа пользователей</label>
            <select name="current-user-group"
                    id="current-user-group"
                    class="width-100"
                    ng-model="users.users.getCurrent().userGroupId.value"
                    ng-change="users.users.getCurrent()._states_.changed(true)"
                    ng-options="group.id.value as group.title.value for group in users.groups.getAll()">
            </select>
        </div>

        <div class="row margin-bottom-10">
            <label for="current-user-organization">Огрганизация</label>
            <select name="current-user-organization"
                    id="current-user-organization"
                    class="width-100"
                    ng-model="users.users.getCurrent().organizationId.value"
                    ng-change="users.users.getCurrent()._states_.changed(true)"
                    ng-options="org.id.value as org.title.value for org in kolenergo.organizations.getAll()">
            </select>
        </div>

        <div class="row margin-bottom-10" ng-init="divisions = kolenergo.divisions.getByOrganizationId(users.users.getCurrent().organizationId.value)">
            <label for="current-user-division">Структурное подразделение</label>
            <select name="current-user-division"
                    id="current-user-division"
                    class="width-100"
                    ng-model="users.users.getCurrent().divisionId.value"
                    ng-change="users.users.getCurrent()._states_.changed(true)"
                    ng-options="division.id.value as division.title.value for division in kolenergo.divisions.getByOrganizationId(users.users.getCurrent().organizationId.value)">
            </select>
        </div>
    </div>

    <div class="width-50">
        <div class="row width-50 text-center">
            <button class="green" ng-disabled="users.users.getCurrent()._states_.changed() === false" ng-click="editUser()">
                <span class="fa fa-save"></span>
                Сохранить
            </button>
        </div>
    </div>
</div>
